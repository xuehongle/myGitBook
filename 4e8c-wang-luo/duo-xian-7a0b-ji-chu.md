# 多线程基础

#### 什么是进程和线程？

举个栗子，迅雷是个进程，迅雷下载多个东西，开了多条线程

#### 什么是线程的串行？

1个线程中任务的执行是串行\(顺序执行\)，1个线程中下载3个文件（分别是文件A、文件B、文件C），

需要下载完文件A，再下载文件B...

#### 什么是多线程？

1个进程中可以开启多条线程，每条线程可以并发（同时）执行不同的任务

比如同时开启3条线程分别下载3个文件（分别是文件A、文件B、文件C）

多线程的原理?

同一时间，CPU只能处理1条线程，只有1条线程在工作（执行）

多线程并发（同时）执行，其实是CPU快速地在多条线程之间调度（切换）

如果CPU调度线程的时间足够快，就造成了多线程并发执行的假象

思考：如果线程非常非常多，会发生什么情况？

CPU会在N多线程之间调度，CPU会累死，消耗大量的CPU资源

每条线程被调度执行的频次会降低（线程的执行效率降低）

#### 多线程的优缺点?

多线程的优点

能适当提高程序的执行效率

能适当提高资源利用率（CPU、内存利用率）

多线程的缺点

开启线程需要占用一定的内存空间（默认情况下，每一条线程都占用512KB），如果开启大量的线程，会占用大量的内存空间，降低程序的性能

线程越多，CPU在调度线程上的开销就越大

程序设计更加复杂：比如线程之间的通信、多线程的数据共享

### 多线程在iOS开发中的应用?

#### 什么是主线程？

一个iOS程序运行后，默认会开启1条线程，称为“主线程”或“UI线程”

主线程的主要作用

显示\刷新UI界面

处理UI事件（比如点击事件、滚动事件、拖拽事件等）

主线程的使用注意

别将比较耗时的操作放到主线程中

耗时操作会卡住主线程，严重影响UI的流畅度，给用户一种“卡”的坏体验

那么iOS中多线程的实现方案？

![](/assets/clipboard.png)

